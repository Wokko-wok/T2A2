<p style="color: green"><%= notice %></p>

<h1>Our Friends</h1>

<%= form_with url: '/listings', method: :get do |f| %>
  <div>
    <%= f.label :min_age, "Min age" %>
    <%= f.number_field :min_age %>
  </div>

  <div>
    <%= f.label :max_age, "Max Age" %>
    <%= f.number_field :max_age %>
  </div>

  <div>
    <%= f.select :species, ['all'] + Listing.distinct.pluck(:species) %>
  </div>

  <%= f.submit "Search" %>
<% end %>

<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Age</th>
      <th>Species</th>
      <th>Descripiton</th>
      <th>price</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @listings.each do |listing| %>
      <tr>
        <td><%= listing.name %></td>
        <td><%= listing.age %></td>
        <td><%= listing.species %></td>
        <td><%= listing.description %></td>
        <td><%= listing.price %></td>
        <td><%= link_to 'Show', listing %></td>
        <% if current_user && current_user.id == listing.user_id %>
          <td><%= link_to 'Edit', edit_listing_path(listing) %></td>
          <td><%= link_to 'Destroy', listing, method: :delete, data: { confirm: 'Are you sure?' } %></td>
        <% end %>
      </tr>
    <% end %>
  </tbody>
</table>

<br>
<%= link_to "Create New listing", new_listing_path %>
